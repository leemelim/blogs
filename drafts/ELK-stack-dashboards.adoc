---
layout: post
title: "ELK Stack Dashboard Improvements for JSON Logging and the Logstash Collector version 1.0"
categories: blog
author_picture: https://avatars3.githubusercontent.com/leemelim
author_github: https://github.com/leemelim
seo-title: ELK Stack Dashboard Improvements for JSON Logging and the Logstash Collector version 1.0 - OpenLiberty.io
seo-description: Start Open Liberty with JSON Logging or Logstash Collector feature. Analyze log events of your Liberty servers using dashboards for ELK stack.
blog_description: "Start Open Liberty with JSON Logging or Logstash Collector feature. Analyze log events of your Liberty servers using dashboards for ELK stack."
additional_authors: 
 - name: Ellen Lau
   github: https://github.com/ellen-lau
   image: https://avatars3.githubusercontent.com/u/28316667
---
= ELK Stack Dashboard Improvements for JSON Logging and the Logstash Collector version 1.0
Halim Lee <https://github.com/leemelim>

You can set up your Liberty servers to write log events to messages.log in JSON format or use the Logstash Collector feature. Filebeat (Liberty) and Logstash Collector (Liberty + logstashCollector-1.0) collect log events from Liberty servers and forward the consolidated log events to a Logstash server.

Elasticsearch, Logstash and Kibana (ELK Stack) can be used together to filter, search and analyze the log events. You can import the dashboards to Kibana and interact with your data.  

== Setting up the ELK stack with JSON Logging:

Follow https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/twlp_elk_stack.html[Analyzing logs with Elastic Stack] in the Liberty Knowledge Center.

== Setting up the ELK stack with Logstash Collector version 1.0:

Follow https://www.ibm.com/support/knowledgecenter/SSD28V_liberty/com.ibm.websphere.wlp.core.doc/ae/twlp_analytics_logstash.html[Using the Logstash collector version 1.0] in the Liberty Knowledge Center.

== Kibana Dashboards

[horizontal]
JSON Logging dashboards:: Audit, Problems, Traffic
Logstash Collector dashboards:: Audit, Memory, Problems, Traffic

The main additions to the Memory, Problems and Traffic dashboards are new visualizations that improve the way you can immediately see possible errors occurring in your Liberty servers.

=== Memory Dashboard

image::/img/blog/ELK_dashboard_memory1.png[Memory Dashboard, align="left"]

The Memory dashboard using the Logstash Collector feature has two new visualizations, Liberty Slow GC and Liberty Slow GC Count, which respectively allow you to view when garbage collection is occurring, and the counts of garbage collection times ranging from 1 to 5 seconds, 5 to 10 seconds, and greater than 10 seconds. This allows you to easily see whether or not your Liberty Server garbage collection is slow overall, and when slower garbage collection is happening during your server’s runtime.


=== Problem Dashboard:

image::/img/blog/ELK_dashboard_problem1.png[Problem Dashboard Top, align="left"]

image::/img/blog/ELK_dashboard_problem2.png[Problem Dashboard Bottom, align="left"]

The Problem dashboards now include a new visualization, Liberty Potential Problem Count, which displays the counts of problematic logs in order of log level/severity. The numbers help you see how many potential problems have occurred. Both Liberty Message and Liberty Trace graphs are filtered by log levels/severity and you can easily grasp how healthy your server is running.


=== Traffic Dashboard:

image::/img/blog/ELK_dashboard_traffic1.png[Traffic Dashboard Top, align="left"]

image::/img/blog/ELK_dashboard_traffic2.png[Traffic Dashboard Bottom, align="left"]

The Traffic dashboards feature a new visualization, Liberty Error Response Code Count, which displays the count of 400s and 500s response codes. This allows you to easily see if your Liberty Server is encountering any errors in your accessed endpoints.

== Conclusion
For all Audit, Memory, Problem and Traffic dashboards, you can filter log information as needed. By using the ELK stack dashboards with JSON Logging or Logstash Collector feature, you can easily see how healthy and responsive your Liberty servers are performing.
